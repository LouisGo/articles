# è®°ä¸€æ¬¡ç®€å•çš„ä¸šåŠ¡æ”¹é€ 

1. ts æ”¹é€ 
2. æ¥å£è¯·æ±‚ fallback
3. å †ä¸Šä¸€ç‚¹ç‚¹ç»†èŠ‚
4. useAntTable + å»é™¤ä¸å¿…è¦çš„ redux
5. useAntTable æ”¹é€ ï¼ˆts ç±»å‹ã€mutateã€paginationï¼‰
6. CopyTooltip
7. è·¯ç”±ç¼“å­˜å¤„ç†
8. Code Spell Checker

## èƒŒæ™¯

ä» Vue åˆè½¬ React æŠ€æœ¯æ ˆï¼Œæ¬ç –è¿‡ç¨‹ä¸­åˆšå¥½æœ‰ä¸ªé€šç”¨ä¸šåŠ¡åœºæ™¯ç»ƒæ‰‹ï¼Œé¡ºä¾¿è®°å½•ä¸€ä¸‹è¿½é€â€œæœ€ä½³å®è·µâ€çš„è¿‡ç¨‹ï¼ˆè™½ç„¶å¾ˆå¯èƒ½ä¸€ä¸ªæœˆåå°±ä¼šå˜æˆè‡ªå·±éƒ½å«Œå¼ƒçš„ ğŸŒ¶ ğŸ” ä»£ç ï¼‰ã€‚

ä½†ç»“æœä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ä¼˜åŒ–æ€è·¯å’Œå®è·µè¿‡ç¨‹ã€‚**æœ¬ç¯‡ä¸ä¼šé•¿ç¯‡ç´¯ç‰è®²æ‰€æœ‰æŠ€æœ¯å®ç°ç»†èŠ‚ï¼Œåªæ‹å‡ºæ¥æˆ‘è®¤ä¸ºæœ€å…³é”®çš„éƒ¨åˆ†**ï¼Œæ¯•ç«Ÿæ‰“å·¥äººçš„æ—¶é—´æœ‰é™...

## åœºæ™¯

å¯¹äºä¸‹é¢è¿™æ ·ä¸€ä¸ªç®€å•çš„åå°ç®¡ç†ç³»ç»Ÿè¡¨æ ¼å±•ç¤ºç•Œé¢ï¼Œæˆ‘ä»¬åº”è¯¥æ—©å·²å¸ç©ºè§æƒ¯ï¼š

![image.png](https://i.loli.net/2021/06/28/cYZQs3trPmpgkOH.png)

ä»¥ React + React-router + Redux + TypeScript + Antd æŠ€æœ¯æ ˆä¸ºå‰æï¼Œåœ¨ç¬¬ä¸€æ—¶é—´æˆ‘ä»¬è‰æ‹Ÿå‡ºä»¥ä¸‹å¤§æ¦‚çš„ç»„ä»¶åˆ’åˆ†æ€è·¯ï¼š

![cYZQs3trPmpgkOH.png](https://i.loli.net/2021/06/28/89ik2UxzdOZImJr.png)

## è¿‡ç¨‹

æŒ‰ç…§ä¸Šå›¾çš„è§„åˆ’ï¼Œå…¶å® Antd å·²ç»å¸®æˆ‘ä»¬å®Œæˆäº†å¤§éƒ¨åˆ†çš„å·¥ä½œã€‚æˆ‘ä»¬è¦åšçš„å¯èƒ½å°±æ˜¯â€œç®€å•çš„â€å¤„ç†æ¥å£è¯·æ±‚ä»¥åŠâ€œæ”¿æ²»æ­£ç¡®â€çš„ä½¿ç”¨ redux å»ç»„ç»‡è§†å›¾æ•°æ®ï¼Œè¿™é‡Œæˆ‘ä»¬æ›´è¿‘ä¸€æ­¥ä½¿ç”¨äº†å®˜æ–¹å·¥å…·é›† @reduxjs/toolkitï¼Œå¬èµ·æ¥ä¸é”™ï¼Ÿä½†æ˜¯å½“æˆ‘æ¥æ‰‹æ—§é¡¹ç›®çš„æ—¶å€™å¾ˆå¿«å°±å‘ç°äº†ç¬¬ä¸€ä¸ªæ‰çœ¼çš„é—®é¢˜ï¼šTypeScript ç±»å‹ç¼ºå¤±ã€‚å¯¹äºå¤„å¥³åº§æ¥è¯´ä¸èƒ½å¿ï¼Œäºæ˜¯é¦–å…ˆå¼€å¯çš„æ˜¯ç–¯ç‹‚çš„â€œè¡¥é½â€ä¹‹æ—…...

### TypeScript æ”¹é€ 

#### 1. æ¥å£è¯·æ±‚æ–¹æ³•

æ“’è´¼å…ˆæ“’ç‹ï¼Œé¦–å…ˆæ‰¾åˆ°åŠ¨æ€æ•°æ®çš„æœ€ä¸»è¦æ¥æºâ€”â€”**å¼‚æ­¥è¯·æ±‚**ï¼š

```diff
+ import { ActivityList } from 'src/types'
export function getConnectList(params: ConnectListParams) {
- return request.get('/v1/offline-business-connect/list', {
+ return request.get<ActivityList>('/v1/offline-business-connect/list', {
    params: {
      is_close: params.isClose || '',
      page: params.page || 1,
      page_size: params.page_size || 10,
      keyword: params.keyword || '',
    },
  });
}
```

ä¹‹å‰çš„è¿”å›ç±»å‹å®Œå…¨æœªçŸ¥ï¼Œç°åœ¨ä¼ å…¥ ActivityList æ³›å‹ï¼Œå¹¶ä¸”ç”¨ GetActivityListParams è¿›è¡Œè¯·æ±‚å‚æ•°çº¦æŸï¼ˆé€šè¿‡ä¸‹é¢çš„ç‰¹æ®Šæ³¨é‡Šæ–¹å¼ï¼Œå¯ä»¥åœ¨ vscode ç­‰ç°ä»£ IDE ä¸­è·å–æ³¨é‡Šæç¤ºï¼‰ã€‚

```typescript
/**
 * æ´»åŠ¨åˆ—è¡¨è¯·æ±‚å‚æ•°
 */
export interface GetActivityListParams {
  isClose?: string | number;
  page?: string | number;
  page_size?: string | number;
  keyword?: string | number;
  type?: string | number;
}

/**
 * æ´»åŠ¨åˆ—è¡¨
 */
export interface ActivityList {
  /* æ€»æ•° */
  total_count: number;
  /* åˆ—è¡¨ */
  list: ActivityListItem[];
}

/**
 * æ´»åŠ¨åˆ—è¡¨è¯¦æƒ…
 */
export type ActivityListItem = {
  /** æ´»åŠ¨ç»“æŸæ—¶é—´ */
  activity_end_time: string;
  /** æ´»åŠ¨å¼€å§‹æ—¶é—´ */
  activity_start_time: string;
  /** æ´»åŠ¨åœ°å€ */
  activity_url: string;
  /** æ´»åŠ¨åç§° */
  area_name: string;
  /** å¼€å‘å•†æ”¶é›†é“¾æ¥ */
  demand_collect_url: string;
  /** æŠ¥åéœ€æ±‚æ•°ç›® */
  developer_apply_count: number;
  /** æŠ¥åå¼€å‘å•†æ•°ç›® */
  developer_register_count: number;
  /** æ˜¯å¦ä¸‹æ¶ */
  is_close: 0 | 1;
  /** æŠ¥åä¾›åº”å•†æ•°ç›® */
  supplier_register_count: number;
  /** æ´»åŠ¨id */
  uid: number;
};
```

ç›´æ£é»„é¾™ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ä¸€æ¬¡åŸºæœ¬è¯·æ±‚ä¸­æ¥å£æ•°æ®çš„è¾“å…¥ç«¯å’Œè¾“å‡ºç«¯éƒ½æœ‰äº†ç±»å‹çº¦æŸçš„ä¿éšœï¼Œå¼€å§‹å¥½èµ·æ¥äº†ã€‚

~~è™½ç„¶å†™å®Œæ¥å£å®šä¹‰çš„æ ·å­å¾ˆé“ä»”ï¼Œä½†æ˜¯ä½ å·¥å…·äººèˆ¬å€’è…¾ç±»å‹æ—¶çš„è¿‡ç¨‹çœŸçš„å¥½ç‹¼ç‹ˆ~~~

è¿™ç§â€œè„åˆç´¯â€è¿˜å®¹æ˜“å‡ºé”™çš„æ´»å„¿æœ€å¥½äº¤ç»™å·¥å…·ï¼Œå½“ç„¶ç»ˆææ¢¦æƒ³æ˜¯ç›´æ¥ç”±åå°å¸¦å‡ºï¼Œè¿™é‡Œæ„Ÿè°¢ç»„å†…å°ä¼™ä¼´è´¡çŒ®çš„å¥½ä¸œè¥¿ä¸‰æšï¼š

1. [JSON è½¬ typescript å®šä¹‰å®ç”¨å·¥å…·](https://etctest.cyzl.com/hello_json)ï¼Œæ ¹æ® JSON æ ¼å¼è‡ªåŠ¨ç”Ÿæˆç±»å‹å®šä¹‰ï¼Œç®€å•ç²—æš´ä½†æ˜¯ç°é˜¶æ®µå¾ˆå®ç”¨
2. [åŸºäº swagger3 çš„å®ç”¨ typescript å·¥å…·](https://www.npmjs.com/package/swagger-ts-define)ï¼Œè‡ªåŠ¨åŒ–ç¨‹åº¦å¾ˆé«˜ï¼Œä½†æ˜¯å¼ºä¾èµ–äº swagger3ï¼Œå¯ä»¥å‚è€ƒæºç æ€è·¯
3. [åŸºäº YApi çš„ typescript å’Œ api request è‡ªåŠ¨ç”Ÿæˆå·¥å…·](https://github.com/fjc0k/yapi-to-typescript)ï¼Œéœ€è¦èŠ±åŠŸå¤«é›†æˆï¼Œæœªæ¥å¯æœŸ

##### è¯·æ±‚å°æ’æ›²

è¿™é‡Œé‡åˆ°äº†å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸èƒ½é‡åˆ°çš„ä¸€ä¸ªé”™è¯¯å†™æ³•ï¼š

```typescript
// before
export function getActivityList(params: GetActivityListParams) {
  return request.get<ActivityList>('/v1/xxx/list', {
    params: {
      is_close: params.isClose || '',
      page: params.page || 1,
      page_size: params.page_size || 10,
      keyword: params.keyword || '',
      type: params.type || '',
    },
  });
}
```

è¿™é‡Œçš„é—®é¢˜å°±æ˜¯ `||`ï¼Œæˆ‘ä»¬çš„æœ¬æ„æ˜¯å½“å·¦è¾¹çš„å€¼ä¸å­˜åœ¨çš„æ—¶å€™ç”¨å³è¾¹çš„å€¼è¿›è¡Œ fallbackï¼Œç†è®ºä¸Šä¸Šæ¥è¯´è¿™æ˜¯è‰¯å¥½çš„ä¹ æƒ¯ï¼Œä½†åœ¨è¿™é‡Œå´æ˜¯â€œå¥½å¿ƒå¹²åäº‹â€ï¼Œå› ä¸ºå½“å·¦è¾¹çš„å€¼ä¸º 0 æ—¶ï¼Œéšå¼è½¬æ¢ä¼šè®©æˆ‘ä»¬åŸæœ¬æœŸæœ›ä¼ çš„`is_close`æšä¸¾ä» 0 å˜æˆäº† ''ã€`page`ä» 0 å˜æˆ 1ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬ä¸€å®šè¦è¿›è¡Œç±»å‹åˆ¤æ–­ã€‚

#### 2. redux ç›¸å…³

è®©æˆ‘ä»¬å…ˆæ¥å—â€œé¡¹ç›®å°±æ˜¯éœ€è¦ reduxâ€çš„è®¾å®šï¼Œç„¶åå»è§£å†³ä¸€äº›å®é™…å­˜åœ¨çš„æœ‰ç”¨çš„é—®é¢˜ã€‚

**redux æ˜¯æˆ‘ä»¬å®é™…ä½¿ç”¨æ•°æ®çš„æ ¹æ®åœ°ï¼Œæ•°æ®çš„æ“ä½œæœ€ç»ˆä¹Ÿä¼šé€šè¿‡ dispatch æ¥åˆ°è¿™é‡Œè¿›è¡Œå¼‚æ­¥å¤„ç†**ï¼Œå› æ­¤ç¬¬äºŒä¸ªéœ€è¦æ”¹é€  ts çš„åœ°æ–¹ä¾¿é€‰åœ¨è¿™é‡Œã€‚

ç”±äºé¡¹ç›®é‡Œé‡‡ç”¨`@loadable/component`å®ç°è·¯ç”±çš„å¼‚æ­¥åŠ è½½ï¼Œå› æ­¤ä¼šå¯¼è‡´åŠ¨æ€åŠ è½½çš„æ¨¡å—å¯¹åº”çš„ reducer ä¸å­˜åœ¨ï¼Œè§£å†³æ€è·¯æ˜¯åœ¨è¿è¡Œæ—¶å°†å½“å‰æ¨¡å—å¯¹åº”çš„ reducer å’Œå·²æœ‰çš„é™æ€å’ŒåŠ¨æ€ reducers è¿›è¡Œä¸€æ¬¡åˆå¹¶ç„¶ååŠ¨æ€æ³¨å…¥ï¼ˆ`store.replaceReducer`ï¼‰ã€‚

å¯¹åº”çš„å·¥å…·æ–¹æ³• injectReducerï¼Œç»´æŠ¤äº†ä¸€ä¸ª asyncReducers å¯¹è±¡ï¼Œåœ¨è·¯ç”±åˆ‡æ¢æ—¶ä¸æ–­è¿›è¡Œå¯¹æ–°æ—§ reducer è¿›è¡Œåˆå¹¶æ“ä½œï¼š

```typescript
// core
const asyncReducers: LooseObject = {};
export function injectReducer<State>(key: string, reducer: Reducer<State>) {
  asyncReducers[key] = reducer;
  const newRootReducer = combineReducers({
    ...staticReducers,
    ...asyncReducers,
  });
  store.replaceReducer(newRootReducer);
}
// å®é™…ä½¿ç”¨
// other.tsx
import { sliceName, sliceReducer } from './slice';
// ...
injectReducer(sliceName, sliceReducer);
// ...
```

è¿™ç§åšæ³•è§£å†³äº†ä¸Šä¸‹æ–‡é—®é¢˜ï¼Œä½†å¤šäº†ä¸€äº›åˆ‡æ¢è·¯ç”±ï¼ˆæ²¡æœ‰è¿›è¡Œç¼“å­˜ï¼‰è¿è¡Œæ—¶çš„æ¶ˆè€—ã€‚

åŒæ—¶å¸¦å‡ºäº†ç¬¬äºŒä¸ªé—®é¢˜ï¼š**ä½œä¸ºé™æ€ç±»å‹è¯­è¨€ typescript æ˜¯æ²¡åŠæ³•åšåˆ°è¿è¡Œæ—¶çš„ç±»å‹æ’æ‹¨çš„**ï¼Œæˆ‘ä»¬å¾—ç”¨â€œæ–­è¨€â€çš„æ€è·¯å»å¤„ç†ï¼Œå³**è·¯ç”±åˆ°äº†è¿™ä¸ªåœ°æ–¹ï¼Œæˆ‘æ˜ç¡®çš„çŸ¥é“å½“å‰çš„ redux éœ€è¦ä½•ç§ç±»å‹çš„æ•°æ®ï¼Œå¹¶ä¸æ ¹æ•°æ®è¿›è¡Œç±»å‹åˆå¹¶**ã€‚å¥½åœ¨`injectReducer`æ‰§è¡Œæ³¨å…¥çš„æ—¶æœºåˆšå¥½å°±æ˜¯æˆ‘ä»¬æœ‰äº†â€œæ˜ç¡®çš„çŸ¥é“å½“å‰çš„ redux éœ€è¦ä½•ç§ç±»å‹çš„æ•°æ®â€çš„å‰æï¼Œå‰©ä¸‹çš„äº‹å°±åªæœ‰â€œç±»å‹åˆå¹¶â€äº†ï¼Œæ ¸å¿ƒä»£ç æ˜¯ä¸‹é¢`ApplyListState`è”åˆç±»å‹çš„å†™æ³•ï¼š

```typescript
import { createSlice } from '@reduxjs/toolkit';
// æ ¹æ•°æ®ç±»å‹
import { RootState } from 'src/reducers';
// åˆå§‹å€¼ï¼ˆstateç±»å‹å‡ºå¤„ï¼‰
export const initialState = {
  isFetching: true,
  isLoaded: false,
  data: {
    list: [],
    total_count: 0,
    is_allowed_list_export: false,
  } as ApplyList,
};
// ç”¨ `as const` æ˜¯ä¸ºäº†æ¥ä¸‹æ¥ç”¨ä½œè”åˆç±»å‹çš„ key å€¼ã€‚
export const applyListSliceName = 'applyListSlice' as const;

const applyListSlice = createSlice({
  name: applyListSliceName,
  initialState,
  extraReducers(builder) {
    // å¼‚æ­¥è¯·æ±‚çš„reducerå¤„ç†
    builder
      .addCase(getApplyList.pending, (state) => {
        state.isFetching = true;
        state.isLoaded = true;
      })
      .addCase(getApplyList.fulfilled, (state, action) => {
        state.isFetching = false;
        state.isLoaded = false;
        state.data = action.payload;
      })
      .addCase(getApplyList.rejected, (state) => {
        state.isFetching = false;
        state.isLoaded = false;
      });
  },
  reducers: {},
});

// export reducer
export const applyListReducer = applyListSlice.reducer;

// ç±»å‹åˆå¹¶
export type ApplyListState = RootState & {
  [applyListSliceName]: ReturnType<typeof applyListReducer>;
};
```

#### 3. å®é™…ä½¿ç”¨ç›¸å…³

ä¸¾ä¸ªæœ€å®¹æ˜“è§‚å¯Ÿçš„ä¾‹å­ï¼šç»™ Antd Table ç»„ä»¶çš„ columns å¯¹è±¡ä¼ å…¥å®é™…æ³›å‹è¿›è¡Œçº¦æŸ

```typescript
import { Table, TableColumnsType } from 'antd';
// æ¡ç›®ç±»å‹
import { ApplyListItem } from 'src/api/applyList';
// ...
// ç»™TableColumnsTypeä¼ å…¥ApplyListItem
const columns: TableColumnsType<ApplyListItem> = [
  //...
];
// ...
return <Table columns={columns} rowKey={(record) => record.id} />;
```

å®é™…æ•ˆæœï¼š ![image.png](https://i.loli.net/2021/06/02/QyCG9geRfd4mAiO.png)

### å…³æ³¨ç‚¹åˆ†ç¦»

ç›®å…‰å›åˆ°è¿™å¹…åˆ’åˆ†å›¾ â†“ æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬ç°åœ¨éœ€è¦çš„ä¸»ä½“ä¿¡æ¯ï¼š

![cYZQs3trPmpgkOH.png](https://i.loli.net/2021/06/28/89ik2UxzdOZImJr.png)

#### ä¸å˜çš„éƒ¨åˆ†

å¯ä»¥çœ‹åˆ°ä¸­é—´å’Œåº•éƒ¨åŒºåŸŸæ˜¯æ¯ä¸ªè¡¨æ ¼å±•ç¤ºé¡µéƒ½å¿…ç„¶æœ‰çš„éƒ¨åˆ†ï¼š

ä¸­é—´çš„ Table ç»„ä»¶ï¼Œæ ¸å¿ƒçš„ props æœ‰ï¼š

1. åˆ—é…ç½® columnsï¼Œè´Ÿè´£ Table.Columns çš„å±•ç¤º
2. æ•°æ®åˆ—è¡¨ dataSourceï¼Œè´Ÿè´£ Table.Rows çš„å±•ç¤º
3. åŠ è½½çŠ¶æ€ loadingï¼Œè´Ÿè´£åŠ è½½çŠ¶æ€çš„å±•ç¤º

åº•éƒ¨çš„ Pagination ç»„ä»¶ï¼Œæ ¸å¿ƒçš„ props æœ‰ï¼š

1. åˆ†é¡µç´¢å¼• pageIndex
2. å•é¡µæ•°æ®é‡ pageSize
3. æ•°æ®æ€»æ•° total
4. onChange å›è°ƒå‡½æ•°ï¼Œè´Ÿè´£å¤„ç†å½“å‰åˆ†é¡µå’Œé‡æ–°è¯·æ±‚

**å¯ä»¥çœ‹åˆ°ä»¥ä¸Šæ¯é¡¹éƒ½è·Ÿæ¥å£æ•°æ®äº¤äº’æœ‰å…³ï¼Œä¹Ÿå°±æ˜¯è¯´éƒ½éœ€è¦åœ¨ redux è¿™ä¸ªæ ¹æ®åœ°ä¸Šè¿›è¡Œç›¸åº”çš„ç»´æŠ¤**

å¦‚æ­¤ç®€å•çš„é¡µé¢å´è¦å†™ä¸€å¤§å †æ— æ³•å¤ç”¨çš„ redux æ ·æœ¬ä»£ç ï¼Œæ­¤æ—¶è¿™ç§æ¨¡å¼å¸¦æ¥çš„å¿ƒæ™ºè´Ÿæ‹…ä¸å¯è°“ä¸å¤šï¼š

1. é€šè¿‡`createSlice`æ„é€  reducer å’Œ actions
2. é€šè¿‡`createAsyncThunk`å¯¹å¼‚æ­¥è¯·æ±‚è¿›è¡Œå°è£…å¹¶å°†è¿™ä¸ª thunk ç”¨ extraReducers è¿›è¡Œå„ç§çŠ¶æ€æµçš„å¤„ç†
3. ç”¨`createSelector`å°†é¡µé¢å®é™…ç”¨åˆ°çš„æ•°æ®è¿›è¡Œç¼“å­˜å¤„ç†åˆ†å‘
4. åœ¨å®é™…é¡µé¢ä¸­å¼•å…¥å¹¶ inject å¯¹åº” reducer
5. åœ¨å®é™…é¡µé¢ä¸­å¼•å…¥ `useDispatch`ã€`useSelector`å’Œå¯¹åº”çš„ actionsã€selectsï¼Œå¼•ç”¨ä¸€æ¡å˜é‡éœ€è¦`const state1 = useSelector(selectState1())`ï¼Œè°ƒç”¨ä¸€ä¸ª action éœ€è¦`dispatch(action1())`
6. ä¸ºäº†æ–¹ä¾¿å¤„ç†å¾ˆå¯èƒ½è¿˜éœ€è¦ç”¨å„ç§ä¸å¿…è¦çš„å˜é‡å’Œæ–¹æ³•å»æ¥æ”¶ redux å¯¼å‡ºçš„å„ç§â€œæ¦‚å¿µâ€

æ­¤æ—¶æˆ‘ä»¬çš„ç•Œé¢å½¢å¼æ˜¯è¿™æ ·çš„ï¼ˆç»¿è‰²ä¸ºæ•°æ®å˜é‡ï¼Œç´«è‰²ä¸º actionï¼Œé»„è‰²ä¸ºå®é™…é¡µé¢ï¼Œä¸­é—´è™šçº¿ç•™ä¸ªå°å°æ‚¬å¿µï¼‰ï¼š

![image.png](https://i.loli.net/2021/06/29/dpInDSTmQyzjXvG.png)

å¯ä»¥çœ‹åˆ°ç»¿è‰²å’Œç´«è‰²éƒ¨åˆ†å¾ˆæ˜æ˜¾æ˜¯**ç›¸åŒçš„ä¸åŒç»„æˆéƒ¨åˆ†**ã€‚ç¿»è¯‘æˆäººè¯å†è¯´ä¸€éï¼š**A å’Œ B çš„å…·ä½“æ•°æ®å€¼å’Œæ“ä½œæ–¹æ³•å¯èƒ½ä¸åŒï¼Œä½†æ˜¯ä»–ä»¬ä»£ç çš„ç»„ç»‡å½¢å¼æ˜¯å®Œå…¨ä¸€è‡´ä¸”å®Œå…¨å¯ä»¥å¤ç”¨çš„**ã€‚

æ­¤æ—¶ redux å´å¦‚åŒä¸€é“å±éšœæŠŠä»–ä»¬ç›¸éš”ï¼Œå¹¶ä¸”å®é™…å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬çš„å…³æ³¨ç‚¹ä¸æ–­çš„åœ¨é¡µé¢é€»è¾‘æœ¬èº«å’Œ redux å¯¹åº”çš„ stateã€actionsã€selector ä¸­æ¨ªè·³ï¼ŒåŠ ä¸€ä¸ªç®€å•çš„å˜é‡åŠ¨è¾„è¦æ”¹åŠ¨å¥½å‡ ä¸ªåœ°æ–¹ã€‚

æˆ‘æ„¿ç§°ä¹‹ä¸º**å…³æ³¨ç‚¹åœ¨ä¸åŒæ–‡ä»¶ä¸­æ¨ªè·³**ã€‚

#### å˜åŠ¨çš„éƒ¨åˆ†

ä¸‹å›¾çº¢è‰²åŒºåŸŸå°±æ˜¯åˆšæ‰è™šçº¿çš„éƒ¨åˆ†ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬å¯¹è¡¨æ ¼çš„æ“ä½œåŒºåŸŸï¼Œæ¯”å¦‚å…³é”®è¯æœç´¢ã€é€‰é¡¹ç­›é€‰ã€æ–°å¢æŒ‰é’®ã€å¯¼å…¥/å¯¼å‡ºï¼Œæ¯ä¸ªé¡µé¢éƒ½ä¸ä¸€æ ·ï¼Œæœ‰äº›é¡µé¢å¯èƒ½å‹æ ¹éƒ½æ²¡æœ‰ã€‚

![image.png](https://i.loli.net/2021/06/29/kxvpH7hsGFSDn4o.png)

å¯¹äºè¿™ç§çµæ´»æ€§æå¼ºçš„éœ€æ±‚æˆ‘ä»¬ä¼¼ä¹æ²¡æœ‰åŠæ³•äº†ï¼Œäºæ˜¯ä»£ç é‡Œå……æ–¥ç€ï¼š

```typescript
// ç‰¹åˆ«å¼ºè°ƒï¼è¿™é‡Œçš„ä»£ç è¿˜ç»è¿‡äº†ç®€åŒ–ï¼åˆ¨é™¤äº†reduxçš„æ‰€æœ‰å½±å“ï¼
// ç‰¹åˆ«å¼ºè°ƒï¼è¿™é‡Œçš„ä»£ç è¿˜ç»è¿‡äº†ç®€åŒ–ï¼åˆ¨é™¤äº†reduxçš„æ‰€æœ‰å½±å“ï¼
// ç‰¹åˆ«å¼ºè°ƒï¼è¿™é‡Œçš„ä»£ç è¿˜ç»è¿‡äº†ç®€åŒ–ï¼åˆ¨é™¤äº†reduxçš„æ‰€æœ‰å½±å“ï¼
const demo: React.FC = () => {
  const [keyword, setKeyword] = useState('');
  const [status, setStatus] = useState('');
  // åšå…¶ä»–ä¸€å¤§å †äº‹
  // ...
  const onChangeKeyWord = () => {};
  const onSearch = () => {};
  const onStatusChange = () => {};
  // åšå…¶ä»–ä¸€å¤§å †äº‹
  // ...
  return (
    <div>
      <Input
        placeholder="è¯·è¾“å…¥å…³é”®è¯"
        onChange={onChangeKeyword}
        onPressEnter={onSearch}
        value={keyword}
      />
      <label>
        <span>çŠ¶æ€</span>
        <Select defaultValue="å…¨éƒ¨" onChange={onStatusChange} value={status}>
          <Option value="">å…¨éƒ¨</Option>
          <Option value="1">çŠ¶æ€1</Option>
          <Option value="2">çŠ¶æ€2</Option>
        </Select>
      </label>
      <Table {...tableProps}></Table>
    </div>
  );
};
```

ä¸Šä¾‹æ¯ä¸€ä¸ª value éƒ½å¯¹åº”ç€ä¸€ä¸ª state (`keyword`ã€`status`)å’Œä¸€ä¸ªç»´æŠ¤ state çš„å›è°ƒå‡½æ•°(`onChangeKeyword`ã€`onSearch`ã€`onStatusChange`)ï¼Œå“ªæ€•ä½ å·²ç»ä¸¥æ ¼æŒ‰ç…§å¼€å‘è§„èŒƒå°†ä»–ä»¬æŒ‰é¡ºåºæ’åˆ—çš„ç¨³ç¨³å½“å½“ï¼Œä½†ç›¸åŒé¢†åŸŸçš„ä»£ç é€»è¾‘åœ¨ä¸€ä¸ªçºµå‘ç©ºé—´é‡Œä»ç„¶æ˜¯æ•£è½çš„ï¼Œå®é™…å¼€å‘è¿‡ç¨‹ä¸­å…³æ³¨ç‚¹éœ€è¦ä¸æ–­çš„ä¸Šä¸‹è½¬æ¢ã€‚

ä»¥ä¸‹æ˜¯é’ˆå¯¹ä¸Šé¢çš„ç®€ç‰ˆä¼ªä»£ç ç”»çš„å…³æ³¨ç‚¹è‰å›¾ï¼Œå¯ä»¥çœ‹åˆ°æ”¹åŠ¨ä¸€ä¸ªå°å°çš„ keyword å°±å¤Ÿæˆ‘ä»¬åœ¨ä»£ç é‡Œä¸Šä¸‹æ¥å›åˆ‡æ¢å¥½å‡ éã€‚

![image.png](https://i.loli.net/2021/06/29/i3V56l4yhNYMWEQ.png)

æ›´åˆ«æåç»­æ˜ å°„åˆ° redux çš„é“¾è·¯ï¼Œç®€ç›´æ˜¯â€œåˆè‡­åˆé•¿â€ï¼Œredux åŠ æŒåä¸Šè¿°ä¾‹å­çš„åˆ‡æ¢æ¬¡æ•°éœ€è¦**ä¹˜ä»¥å¯¹åº” redux æ–‡ä»¶çš„æ•°ç›®**ï¼Œåœ¨è¿™é‡Œä¹Ÿæ˜¯æ²¡æœ‰å¤ç”¨çš„ã€‚

æˆ‘æ„¿ç§°ä¹‹ä¸º**å…³æ³¨ç‚¹çš„ä¸Šä¸‹æ¨ªè·³**

**æœ€æœ€å¯æ°”çš„æ˜¯ï¼Œredux çš„æ•°æ®ä¸­å¿ƒåŒ–ç®¡ç†åœ¨è¿™ä¸ªåº”ç”¨ä¸­å®Œå®Œå…¨å…¨æ²¡æœ‰è¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¹‹å‰å®Œå…¨æ˜¯ç”¨ redux è§„å®šçš„è·¯æ•°ç…§æœ¬å®£ç§‘çš„æœºæ¢°å¼å¼å®Œæˆä»»åŠ¡ï¼Œæ¯ä¸ªè·¯ç”±çš„æ•°æ®å´å¹¶ä¸æ˜¯å®æ—¶å…±äº«å…±ç”¨çš„ã€‚**

å¦¥å¦¥çš„æ€é¸¡ç”¨ç‰›åˆ€ï¼Œ**å¹¶ä¸”è¿˜ç”¨äº†æ€ç‰›çš„åŠ›**ã€‚
