---
slug: 21-08-05
---

# 21-08-05[调试技巧]

## Console 断点调试

一般我们在浏览器中 debug 都是直接点击需要打断点的行（以下截图来自 Edge 的控制台，Chrome 会长的不一样并且是英文），在该行左侧会出现断点提示：

![image.png](https://i.loli.net/2021/08/05/zUnwCdl4GKgtNEI.png)

但如果右击该行（或者编辑已打的断点），则会发现新天地：

![image.png](https://i.loli.net/2021/08/05/Hna4bRF5EkPyQfY.png)

### 条件断点

添加条件断点后，只有在符合条件时才会命中断点。

比如下图中只有当页码大于 5 时才会进入调试状态： ![image.png](https://i.loli.net/2021/08/05/c8Iha1DM5LNFqP7.png)

### 记录断点

顾名思义，不打断代码运行，只在控制台打印你需要的值，是不侵入代码的 `console.log()`：

![image.png](https://i.loli.net/2021/08/05/Nw6qIR1fiTvGSJd.png)

可以看到不同类型的断点左侧的标志也是不同的，便于区分。

## 事件冒泡判断

当页面中海量使用各种事件监听再加上引用各种第三方库时，事件的来源很容易就模糊不清了。比如事件冒泡的中间阶段突然被人“截胡”了，代码追溯起来很痛苦。

解决这类问题的通用思路：**代理原生方法并进行你需要的处理（log、error capture 等）**。

```javascript
const copyStopPropagation = MouseEvent.prototype.stopPropagation;

MouseEvent.prototype.stopPropagation = function (...args) {
  console.trace('stopPropagation');
  copyStopPropagation.call(this, ...args);
};
```
