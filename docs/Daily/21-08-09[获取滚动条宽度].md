---
slug: 21-08-09
---

# 21-08-09[获取滚动条宽度]

## 获取滚动条宽度

背景：打开弹窗时需要屏蔽背景滚动条，这时候单纯给 body 加`overflow: hidden`会造成页面宽度突然“伸缩”（也就是一个滚动条的宽度），这个时候需要根据当前页面滚动条的宽度进行 padding

基本思路：构造一次性的假元素进行宽度计算

实现细节： 

```javascript
/**
 * 获取当前浏览器滚动条宽度
 */
function getScrollbarWidth () {
  // 创建不可见的虚拟容器并添加到dom
  const $container = document.createElement('div');
  $container.style.visibility = 'hidden';
  $container.style.position = 'absolute';
  $container.style.left = '-9999px';
  $container.style.width = '100px';
  $container.style.overflow = 'scroll'; // 强制展示滚动条

  document.body.append($container);

  // 获取外容器宽度
  const containerWidth = $container.offsetWidth;

  // 创建内部容器
  const $inner = document.createElement('div');
  $inner.style.width = '100%';
  $container.appendChild($inner);

  // 获取内部容器宽度
  const innerWidth = $inner.offsetWidth;

  // 移除节点
  $container.parentNode?.removeChild($container);

  // 获取实际滚动条宽度
  return containerWidth - innerWidth;
};
```
